<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Full Color Palette Demo</title>
  <link rel="stylesheet" href="../index.css">
  <style>
    /* Custom styles for demo */
    .demo-section { margin-bottom: 2rem; padding: 1rem; border: 1px solid var(--outline-subtle); border-radius: var(--radius-md); }
    .customizer { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
    .customizer label { display: block; margin-bottom: 0.5rem; }
    .customizer input { width: 100%; }
    .palette-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; }
    .color-family { margin-bottom: 1rem; }
    .color-family h4 { margin-bottom: 0.5rem; text-align: center; font-size: var(--font-size-lg); }
    .swatches { display: grid; grid-template-columns: repeat(13, 1fr); gap: 1px; }
    .swatch { height: 40px; border-radius: var(--radius-sm); border: 1px solid var(--outline-subtle); display: flex; align-items: center; justify-content: center; font-size: 0.6rem; color: var(--text-default); }
    #theme-toggle { margin-bottom: 1rem; background: var(--accent); color: var(--text-on-accent); border: none; padding: 0.5rem 1rem; border-radius: var(--radius-md); cursor: pointer; }
    /* Set accent-color for form controls */
    accent-color: var(--accent);
    /* Dark mode styles */
    html[data-theme="dark"] {
      --accent-l: 70%; --accent-c: 0.18;
      --surface-c: 0.02; --l-threshold: 0.6;
      --base: oklch(var(--base-l, 22%) calc(var(--surface-c) * 0.9) var(--neutral-h));
      --bedrock: oklch(95% calc(var(--surface-c) * 0.7) var(--neutral-h));
      --surface-muted: oklch(20% calc(var(--surface-c) * 0.5) var(--neutral-h));
      --surface-subtle: oklch(21% calc(var(--surface-c) * 0.7) var(--neutral-h));
      --surface-default: oklch(25% var(--surface-c) var(--neutral-h));
      --surface-overt: oklch(30% calc(var(--surface-c) * 1.2) var(--neutral-h));
      --text-muted: oklch(65% calc(var(--surface-c) * 1.2) var(--neutral-h) / 0.8);
      --text-subtle: oklch(75% calc(var(--surface-c) * 1.0) var(--neutral-h));
      --text-default: oklch(88% calc(var(--surface-c) * 0.8) var(--neutral-h));
      --text-overt: oklch(95% calc(var(--surface-c) * 0.6) var(--neutral-h));
      --outline-subtle: oklch(from var(--base) calc(l + var(--l-delta-5)) c h);
      --outline-default: oklch(from var(--base) calc(l + var(--l-delta-6)) calc(c + var(--c-delta-1)) h);
      --outline-overt: oklch(from var(--base) calc(l + var(--l-delta-7)) calc(c + var(--c-delta-2)) h);
      --highlight-bg-muted: oklch(from var(--base) calc(l + var(--l-delta-1)) c h);
      --highlight-bg-subtle: oklch(from var(--base) calc(l + var(--l-delta-3)) c h);
      --success-l: 65%; --warning-l: 75%; --error-l: 70%; --info-l: 75%;
      --success: oklch(var(--success-l) var(--success-c) var(--success-h));
      --warning: oklch(var(--warning-l) var(--warning-c) var(--warning-h));
      --error: oklch(var(--error-l) var(--error-c) var(--error-h));
      --info: oklch(var(--info-l) var(--info-c) var(--info-h));
      --text-success: var(--success); --text-warning: var(--warning); --text-error: var(--error); --text-info: var(--info);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Full Color Palette Demo</h1>
    <button onclick="toggleTheme()" id="theme-toggle">Switch to Dark Mode</button>

    <!-- Palette Customizer -->
    <section class="demo-section">
      <h2>Customizable Palette</h2>
      <p>Adjust hues and chroma for different color families.</p>
      <div class="customizer">
        <fieldset>
          <legend>Brand Colors</legend>
          <label>Accent Hue: <input type="range" id="accent-h" min="0" max="360" value="220" oninput="updateVar('--accent-h', this.value)"></label>
          <label>Accent Chroma: <input type="range" id="accent-c" min="0" max="50" value="15" oninput="updateVar('--accent-c', this.value / 100)"></label>
        </fieldset>
        <fieldset>
          <legend>Feedback Colors</legend>
          <label>Success Hue: <input type="range" id="success-h" min="0" max="360" value="160" oninput="updateVar('--success-h', this.value)"></label>
          <label>Warning Hue: <input type="range" id="warning-h" min="0" max="360" value="35" oninput="updateVar('--warning-h', this.value)"></label>
          <label>Error Hue: <input type="range" id="error-h" min="0" max="360" value="355" oninput="updateVar('--error-h', this.value)"></label>
          <label>Info Hue: <input type="range" id="info-h" min="0" max="360" value="200" oninput="updateVar('--info-h', this.value)"></label>
        </fieldset>
        <fieldset>
          <legend>Grayscale</legend>
          <label>Neutral Chroma: <input type="range" id="neutral-c" min="0" max="10" value="1" oninput="updateVar('--neutral-c', this.value / 100)"></label>
        </fieldset>
        <fieldset>
          <legend>Chroma Clamping</legend>
          <label>Max Chroma Near-White: <input type="range" id="clamp-max-c-0" min="0" max="10" value="3" oninput="updateVar('--clamp-max-c-0', this.value / 100)"></label>
          <label>Max Chroma Near-Black: <input type="range" id="clamp-max-c-12" min="0" max="10" value="4" oninput="updateVar('--clamp-max-c-12', this.value / 100)"></label>
        </fieldset>
        <fieldset>
          <legend>Thresholds & Deltas</legend>
          <label>L Threshold: <input type="range" id="l-threshold" min="0" max="1" step="0.01" value="0.65" oninput="updateVar('--l-threshold', this.value)"></label>
          <label>C Threshold: <input type="range" id="c-threshold" min="0" max="0.2" step="0.01" value="0.08" oninput="updateVar('--c-threshold', this.value)"></label>
          <label>L Delta: <input type="range" id="l-delta" min="-10" max="10" step="0.1" value="0" oninput="updateVar('--l-delta', this.value + '%')"></label>
          <label>C Delta: <input type="range" id="c-delta" min="-0.1" max="0.1" step="0.01" value="0" oninput="updateVar('--c-delta', this.value)"></label>
        </fieldset>
        <button onclick="resetPalette()">Reset to Defaults</button>
      </div>
    </section>

    <!-- Full Color Palette Display -->
    <section class="demo-section">
      <h2>Complete Color Palette</h2>
      <p>All color scales with 13 steps (0-12) each.</p>
      <div class="palette-grid" id="palette-container"></div>
    </section>
  </div>

  <script>
    function updateVar(name, value) {
      document.documentElement.style.setProperty(name, value);
      setTimeout(generatePalette, 50);
    }
    function resetPalette() {
      document.getElementById('accent-h').value = 220;
      document.getElementById('accent-c').value = 15;
      document.getElementById('success-h').value = 160;
      document.getElementById('warning-h').value = 35;
      document.getElementById('error-h').value = 355;
      document.getElementById('info-h').value = 200;
      document.getElementById('neutral-c').value = 1;
      document.getElementById('clamp-max-c-0').value = 3;
      document.getElementById('clamp-max-c-12').value = 4;
      document.getElementById('l-threshold').value = 0.65;
      document.getElementById('c-threshold').value = 0.08;
      document.getElementById('l-delta').value = 0;
      document.getElementById('c-delta').value = 0;
      updateVar('--accent-h', 220);
      updateVar('--accent-c', 0.15);
      updateVar('--success-h', 160);
      updateVar('--warning-h', 35);
      updateVar('--error-h', 355);
      updateVar('--info-h', 200);
      updateVar('--neutral-c', 0.01);
      updateVar('--clamp-max-c-0', 0.03);
      updateVar('--clamp-max-c-12', 0.04);
      updateVar('--l-threshold', 0.65);
      updateVar('--c-threshold', 0.08);
      updateVar('--l-delta', '0%');
      updateVar('--c-delta', 0);
    }
    function toggleTheme() {
      const html = document.documentElement;
      if (html.getAttribute('data-theme') === 'dark') {
        html.removeAttribute('data-theme');
        document.getElementById('theme-toggle').textContent = 'Switch to Dark Mode';
      } else {
        html.setAttribute('data-theme', 'dark');
        document.getElementById('theme-toggle').textContent = 'Switch to Light Mode';
      }
    }
    function generatePalette() {
      const lightness = [0.98, 0.95, 0.90, 0.82, 0.74, 0.66, 0.58, 0.50, 0.42, 0.34, 0.26, 0.18, 0.10];
      const chroma = [0.02, 0.02, 0.04, 0.06, 0.08, 0.10, 0.12, 0.15, 0.18, 0.22, 0.26, 0.30, 0.37];
      const root = document.documentElement;
      const accentHue = parseFloat(getComputedStyle(root).getPropertyValue('--accent-h')) || 220;
      const neutralChroma = parseFloat(getComputedStyle(root).getPropertyValue('--neutral-c')) || 0.01;
      const clamp0 = parseFloat(getComputedStyle(root).getPropertyValue('--clamp-max-c-0')) || 0.03;
      const clamp12 = parseFloat(getComputedStyle(root).getPropertyValue('--clamp-max-c-12')) || 0.04;
      const scales = [
        { name: 'Accent', hue: accentHue, useNeutralChroma: false },
        { name: 'Secondary', hue: (accentHue + 60) % 360, useNeutralChroma: false },
        { name: 'Tertiary', hue: (accentHue - 90 + 360) % 360, useNeutralChroma: false },
        { name: 'Neutral', hue: 0, useNeutralChroma: true },
        { name: 'Gray', hue: 220, useNeutralChroma: true },
        { name: 'Success', hue: parseFloat(getComputedStyle(root).getPropertyValue('--success-h')) || 160, useNeutralChroma: false },
        { name: 'Warning', hue: parseFloat(getComputedStyle(root).getPropertyValue('--warning-h')) || 35, useNeutralChroma: false },
        { name: 'Error', hue: parseFloat(getComputedStyle(root).getPropertyValue('--error-h')) || 355, useNeutralChroma: false },
        { name: 'Info', hue: parseFloat(getComputedStyle(root).getPropertyValue('--info-h')) || 200, useNeutralChroma: false },
        { name: 'Red', hue: 0, useNeutralChroma: false },
        { name: 'Orange', hue: 30, useNeutralChroma: false },
        { name: 'Amber', hue: 65, useNeutralChroma: false },
        { name: 'Yellow', hue: 85, useNeutralChroma: false },
        { name: 'Lime', hue: 120, useNeutralChroma: false },
        { name: 'Green', hue: 140, useNeutralChroma: false },
        { name: 'Emerald', hue: 160, useNeutralChroma: false },
        { name: 'Teal', hue: 175, useNeutralChroma: false },
        { name: 'Cyan', hue: 195, useNeutralChroma: false },
        { name: 'Sky', hue: 210, useNeutralChroma: false },
        { name: 'Blue', hue: 240, useNeutralChroma: false },
        { name: 'Indigo', hue: 265, useNeutralChroma: false },
        { name: 'Violet', hue: 285, useNeutralChroma: false },
        { name: 'Purple', hue: 300, useNeutralChroma: false },
        { name: 'Fuchsia', hue: 320, useNeutralChroma: false },
        { name: 'Pink', hue: 340, useNeutralChroma: false },
        { name: 'Rose', hue: 355, useNeutralChroma: false },
        { name: 'Slate', hue: 225, useNeutralChroma: false }
      ];
      const container = document.getElementById('palette-container');
      container.innerHTML = '';
      scales.forEach(scale => {
        const familyDiv = document.createElement('div');
        familyDiv.className = 'color-family';
        const title = document.createElement('h4');
        title.textContent = scale.name;
        familyDiv.appendChild(title);
        const swatchesDiv = document.createElement('div');
        swatchesDiv.className = 'swatches';
        for (let i = 0; i <= 12; i++) {
          const swatch = document.createElement('div');
          swatch.className = 'swatch';
          const baseC = scale.useNeutralChroma ? neutralChroma : chroma[i];
          const c = Math.min(baseC, i < 2 ? clamp0 : i > 10 ? clamp12 : baseC);
          const color = `oklch(${lightness[i]} ${c} ${scale.hue})`;
          swatch.style.backgroundColor = color;
          swatch.title = `${scale.name}-${i}: ${color}`;
          swatch.textContent = i;
          swatchesDiv.appendChild(swatch);
        }
        familyDiv.appendChild(swatchesDiv);
        container.appendChild(familyDiv);
      });
    }
    resetPalette();
  </script>
</body>
</html>